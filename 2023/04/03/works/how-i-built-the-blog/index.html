<!DOCTYPE html><html lang="zh-CN"><head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.0.0">
<link rel="preconnect" href="https://fonts.geekzu.org" crossorigin="">
<link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin="">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="BDOes_2c0TiF0BOSphLeKhmHOej-Hk1dTMD5LcJq1I4">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.geekzu.org/css?family=Tahoma:300,300italic,400,400italic,700,700italic%7COpen+Sans:300,300italic,400,400italic,700,700italic%7CNoto+Serif+SC:300,300italic,400,400italic,700,700italic&amp;display=swap&amp;subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha256-yIDrPSXHZdOZhAqiBP7CKzIwMQmRCJ8UeB8Jo17YC4o=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.28/fancybox/fancybox.css" integrity="sha256-6cQIC71/iBIYXFK+0RHAvwmjwWzkWd+r7v/BX3/vZDc=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"blog.jason0743.space","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.19.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"style":"flat"},"fold":{"enable":true,"height":500,"threshold":500},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script>

    <meta name="description" content="好久不见！经过许久的折腾以后，终于闲下功夫来复盘一下博客如何部署起来的了！话不多说，这就进入主题！">
<meta property="og:type" content="article">
<meta property="og:title" content="我是如何一步步把这个博客搭建起来的">
<meta property="og:url" content="https://blog.jason0743.space/2023/04/03/works/how-i-built-the-blog/">
<meta property="og:site_name" content="随心记">
<meta property="og:description" content="好久不见！经过许久的折腾以后，终于闲下功夫来复盘一下博客如何部署起来的了！话不多说，这就进入主题！">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://blog.jason0743.space/2023/04/03/works/how-i-built-the-blog/menu.png">
<meta property="og:image" content="https://blog.jason0743.space/2023/04/03/works/how-i-built-the-blog/sidemenu.png">
<meta property="og:image" content="https://blog.jason0743.space/2023/04/03/works/how-i-built-the-blog/cname.png">
<meta property="og:image" content="https://blog.jason0743.space/2023/04/03/works/how-i-built-the-blog/leancloud-1.png">
<meta property="og:image" content="https://blog.jason0743.space/2023/04/03/works/how-i-built-the-blog/vercel-1.png">
<meta property="og:image" content="https://blog.jason0743.space/2023/04/03/works/how-i-built-the-blog/vercel-2.png">
<meta property="og:image" content="https://blog.jason0743.space/2023/04/03/works/how-i-built-the-blog/vercel-3.png">
<meta property="og:image" content="https://blog.jason0743.space/2023/04/03/works/how-i-built-the-blog/vercel-4.png">
<meta property="og:image" content="https://blog.jason0743.space/2023/04/03/works/how-i-built-the-blog/vercel-5.png">
<meta property="og:image" content="https://blog.jason0743.space/2023/04/03/works/how-i-built-the-blog/vercel-6.png">
<meta property="og:image" content="https://blog.jason0743.space/2023/04/03/works/how-i-built-the-blog/management.png">
<meta property="og:image" content="https://blog.jason0743.space/2023/04/03/works/how-i-built-the-blog/comment.png">
<meta property="og:image" content="https://blog.jason0743.space/2023/04/03/works/how-i-built-the-blog/gen-key-1.png">
<meta property="og:image" content="https://blog.jason0743.space/2023/04/03/works/how-i-built-the-blog/gen-key-0.png">
<meta property="og:image" content="https://blog.jason0743.space/2023/04/03/works/how-i-built-the-blog/gen-key-2.png">
<meta property="og:image" content="https://blog.jason0743.space/2023/04/03/works/how-i-built-the-blog/gen-key-3.png">
<meta property="og:image" content="https://blog.jason0743.space/2023/04/03/works/how-i-built-the-blog/gen-key-4.png">
<meta property="article:published_time" content="2023-04-03T11:45:33.000Z">
<meta property="article:modified_time" content="2024-01-02T04:33:11.783Z">
<meta property="article:author" content="Jason Ren">
<meta property="article:tag" content="运维">
<meta property="article:tag" content="建站">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://blog.jason0743.space/2023/04/03/works/how-i-built-the-blog/menu.png">


<link rel="canonical" href="https://blog.jason0743.space/2023/04/03/works/how-i-built-the-blog/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://blog.jason0743.space/2023/04/03/works/how-i-built-the-blog/","path":"2023/04/03/works/how-i-built-the-blog/","title":"我是如何一步步把这个博客搭建起来的"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>我是如何一步步把这个博客搭建起来的 | 随心记</title>
  







<link rel="dns-prefetch" href="https://blog-manage.jason0743.space/">
  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="随心记" type="application/atom+xml">
</head>

<body itemscope="" itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope="" itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">随心记</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">展现安全态度</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="https://www.jason0743.space/#/about" rel="section external nofollow noreferrer" target="_blank"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-note"><a href="https://note.jason0743.space/" rel="section external nofollow noreferrer" target="_blank"><i class="fa fa-book fa-fw"></i>笔记</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>站点地图</a></li><li class="menu-item menu-item-todo"><a href="/todo/" rel="section"><i class="fa fa-check fa-fw"></i>待办事项</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="搜索..." spellcheck="false" type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%80%89%E6%8B%A9%E5%8D%9A%E5%AE%A2%E4%B8%BB%E9%A2%98%E5%92%8C%E6%9E%B6%E6%9E%84"><span class="nav-number">1.</span> <span class="nav-text">选择博客主题和架构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%BB%E9%A2%98%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE"><span class="nav-number">2.</span> <span class="nav-text">主题安装与配置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Hexo%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E8%BF%9B%E4%B8%80%E6%AD%A5%E9%85%8D%E7%BD%AE"><span class="nav-number">2.1.</span> <span class="nav-text">Hexo 配置文件的进一步配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#next%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E8%BF%9B%E4%B8%80%E6%AD%A5%E9%85%8D%E7%BD%AE"><span class="nav-number">2.2.</span> <span class="nav-text">next 主题配置文件的进一步配置</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BE%A7%E8%BE%B9%E6%A0%8F"><span class="nav-number">2.2.1.</span> <span class="nav-text">侧边栏</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%A1%B5%E8%84%9A"><span class="nav-number">2.2.2.</span> <span class="nav-text">页脚</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%A4%87%E6%A1%88%E4%BF%A1%E6%81%AF"><span class="nav-number">2.2.2.1.</span> <span class="nav-text">备案信息</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%BB%BA%E7%AB%99%E6%97%B6%E9%97%B4"><span class="nav-number">2.2.2.2.</span> <span class="nav-text">建站时间</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%A1%B5%E8%84%9A%E5%9B%BE%E6%A0%87"><span class="nav-number">2.2.2.3.</span> <span class="nav-text">页脚图标</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%89%88%E6%9D%83%E4%BF%A1%E6%81%AF"><span class="nav-number">2.2.2.4.</span> <span class="nav-text">版权信息</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%94%9F%E6%88%90%E5%B9%B3%E5%8F%B0%E4%BF%A1%E6%81%AF"><span class="nav-number">2.2.2.5.</span> <span class="nav-text">生成平台信息</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%9F%E5%90%8D%E9%85%8D%E7%BD%AE"><span class="nav-number">2.3.</span> <span class="nav-text">域名配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%90%AF%E7%94%A8%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="nav-number">2.4.</span> <span class="nav-text">启用资源文件夹</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6"><span class="nav-number">3.</span> <span class="nav-text">安装插件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%84%E8%AE%BA%E6%98%BE%E7%A4%BA"><span class="nav-number">3.1.</span> <span class="nav-text">评论显示</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9C%8D%E5%8A%A1%E7%AB%AF%E9%85%8D%E7%BD%AE"><span class="nav-number">3.1.1.</span> <span class="nav-text">服务端配置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%85%8D%E7%BD%AE"><span class="nav-number">3.1.2.</span> <span class="nav-text">客户端配置</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%86%E9%A2%91-%E9%9F%B3%E4%B9%90%E5%B5%8C%E5%85%A5"><span class="nav-number">3.2.</span> <span class="nav-text">视频 / 音乐嵌入</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Markdown%E6%B8%B2%E6%9F%93%E5%99%A8%E9%85%8D%E7%BD%AE"><span class="nav-number">3.3.</span> <span class="nav-text">Markdown 渲染器配置</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%83%A8%E7%BD%B2%E5%88%B0GitHub"><span class="nav-number">4.</span> <span class="nav-text">部署到 GitHub</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BB%BA%E7%AB%8B%E4%BB%93%E5%BA%93"><span class="nav-number">4.1.</span> <span class="nav-text">建立仓库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8GitHub-Actions%E5%85%A8%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E8%BF%87%E7%A8%8B"><span class="nav-number">4.2.</span> <span class="nav-text">使用 GitHub Actions 全自动化部署过程</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%94%9F%E6%88%90Deploy-key"><span class="nav-number">4.2.1.</span> <span class="nav-text">生成 Deploy key</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%9D%E7%95%99-gh-pages-%E6%8F%90%E4%BA%A4%E5%8E%86%E5%8F%B2"><span class="nav-number">4.2.2.</span> <span class="nav-text">保留 gh-pages 提交历史</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%AD%A3%E7%A1%AE%E7%9A%84%E6%97%B6%E5%8C%BA"><span class="nav-number">4.2.3.</span> <span class="nav-text">使用正确的时区</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%BF%E9%97%AE%E4%BC%98%E5%8C%96"><span class="nav-number">5.</span> <span class="nav-text">访问优化</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#hexo-all-minifier"><span class="nav-number">5.1.</span> <span class="nav-text">hexo-all-minifier</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#cache"><span class="nav-number">5.2.</span> <span class="nav-text">cache</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Jason Ren" src="/images/avatar-v1.png">
  <p class="site-author-name" itemprop="name">Jason Ren</p>
  <div class="site-description" itemprop="description">技术博客，偶尔放一些心情相关随笔</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">66</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">49</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">37</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/jasonren0403" title="GitHub → https://github.com/jasonren0403" rel="noopener me external nofollow noreferrer" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/theRealRev270" title="Twitter → https://twitter.com/theRealRev270" rel="noopener me external nofollow noreferrer" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.facebook.com/renjason1999/" title="Facebook → https://www.facebook.com/renjason1999/" rel="noopener me external nofollow noreferrer" target="_blank"><i class="fab fa-facebook fa-fw"></i>Facebook</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.instagram.com/jasonren0403/" title="Instagram → https://www.instagram.com/jasonren0403/" rel="noopener me external nofollow noreferrer" target="_blank"><i class="fab fa-instagram fa-fw"></i>Instagram</a>
      </span>
  </div>

        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope="" itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.jason0743.space/2023/04/03/works/how-i-built-the-blog/">

    <span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar-v1.png">
      <meta itemprop="name" content="Jason Ren">
    </span>

    <span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="随心记">
      <meta itemprop="description" content="技术博客，偶尔放一些心情相关随笔">
    </span>

    <span hidden="" itemprop="post" itemscope="" itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="我是如何一步步把这个博客搭建起来的 | 随心记">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          我是如何一步步把这个博客搭建起来的
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-04-03 19:45:33" itemprop="dateCreated datePublished" datetime="2023-04-03T19:45:33+08:00">2023-04-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2024-01-02 12:33:11" itemprop="dateModified" datetime="2024-01-02T12:33:11+08:00">2024-01-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%BF%90%E7%BB%B4/" itemprop="url" rel="index"><span itemprop="name">运维</span></a>
        </span>
          ，
        <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index"><span itemprop="name">技术</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/2023/04/03/works/how-i-built-the-blog/#waline" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" data-path="/2023/04/03/works/how-i-built-the-blog/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>5.9k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 ≈</span>
      <span>22 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><p>好久不见！经过许久的折腾以后，终于闲下功夫来复盘一下博客如何部署起来的了！话不多说，这就进入主题！</p>
<span id="more"></span>
<h2 id="选择博客主题和架构">选择博客主题和架构</h2>
<p>作为一个主要承担内容输出的部分，我首先在自行开发和成熟博客框架上进行了趋于中间化的选择。成熟的框架，如 WordPress，固然可以完整提供博客所具有的全部功能，但是略显笨重，且对于本来空间就不大的云服务器更是一种考验。如果全部自己撰写的话，又会陷入到维护成本过高的问题。各种小部件的适配和样式的维护，都是一件很痛苦的事情。由此看来，静态博客生成器是一个不错的选择。</p>
<p>GitHub 上有很多成熟的静态博客生成器，如 Hexo、Jekyll、Hugo 等等。进行了一番对比后，我最终选择了 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo</a> 和 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://theme-next.js.org/">Hexo-next</a> 主题。Hexo 本体是基于 Node.js 的，我可以专心使用 Markdown 书写内容，而由一些 hexo 终端命令来渲染成所需的静态文档。而且，经过对一些 GitHub 仓库的浏览，我发现 Hexo 的主题和插件也是非常丰富的，可以满足我对于博客的基本需求。</p>
<h2 id="主题安装与配置">主题安装与配置</h2>
<p>Hexo 的文档很清楚，我可以直接通过 npm 命令来安装 Hexo 本体，并安装 Hexo next 主题：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br><span class="line">npm install hexo-theme-next</span><br></pre></td></tr></tbody></table></figure>
<p>安装完成后，博客根目录下会出现两种 yml 配置文件，一个是<code>_config.yml</code>，称为 Hexo 配置文件；一个是<code>_config.next.yml</code>，称为主题配置文件。接下来就需要对这两个文件进行深一步配置。</p>
<h3 id="Hexo配置文件的进一步配置">Hexo 配置文件的进一步配置</h3>
<p>首先是基本信息的填写，如博客标题、副标题、描述、关键词、作者、语言、时区等等。所有这些配置都将写入 HTML 的 <code>meta</code> 标签中，以便搜索引擎更好的索引博客。</p>
<figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">title:</span> <span class="string">'随心记'</span>  <span class="comment"># 标题</span></span><br><span class="line"><span class="attr">subtitle:</span> <span class="string">'展现安全态度'</span>  <span class="comment"># 副标题</span></span><br><span class="line"><span class="comment"># 浏览器标签页显示的标题会是 title - subtitle 的形式</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">''</span>  <span class="comment"># 站点介绍</span></span><br><span class="line"><span class="attr">keywords:</span> <span class="string">''</span>  <span class="comment"># 关键词</span></span><br><span class="line"><span class="attr">author:</span> <span class="string">''</span>  <span class="comment"># 作者</span></span><br><span class="line"><span class="attr">language:</span> <span class="string">zh-CN</span>  <span class="comment"># 所用语言，中国大陆为zh-CN</span></span><br><span class="line"><span class="attr">timezone:</span> <span class="string">'Asia/Shanghai'</span>  <span class="comment"># 时区，中国大陆网站最好设置为上海时区</span></span><br></pre></td></tr></tbody></table></figure>
<p>我们安装的主题是 hexo next 主题，要在主配置文件（<code>_config.yml</code>）中写入主题的名称：</p>
<figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">theme:</span> <span class="string">next</span></span><br></pre></td></tr></tbody></table></figure>
<p>以上步骤结束，我们就可以通过 <code>hexo s</code> 命令来启动本地服务器，通过 <code>localhost:4000</code> 来预览博客的样子了。但是，我们还需要对主题配置文件进行进一步配置。</p>
<h3 id="next主题配置文件的进一步配置">next 主题配置文件的进一步配置</h3>
<div class="note info"><p>官方配置文档在<a target="_blank" rel="noopener external nofollow noreferrer" href="https://theme-next.js.org/docs/theme-settings/">这里</a>，可供参考</p>
</div>
<p>我所安装的 Hexo 已经是 5.0 版本以后了，官方推荐使用替代配置文件<code>_config.next.yml</code> 来进行主题配置，以防止更新时被覆盖。</p>
<p>首先是博客主题（scheme），NexT 提供了 4 种主题（<code>Muse</code>、<code>Mist</code>、<code>Pisces</code> 和 <code>Gemini</code>），我直接选择了默认主题 <code>Muse</code>，可能我个人对这个也没啥大要求吧，哪天可以改改试试其他的。</p>
<figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">scheme:</span> <span class="string">Muse</span></span><br></pre></td></tr></tbody></table></figure>
<p>然后是暗黑模式，这可以通过 <code>darkmode</code> 来设置。我并没有改变这个选项，感觉这个主题应该还是提供一个按钮，供用户切换比较好。</p>
<figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">darkmode:</span> <span class="literal">true</span></span><br></pre></td></tr></tbody></table></figure>
<p>接下来是站点 Favicon，是浏览器标签页上会显示的小图标，需要在 <code>favicon</code> 下进行设置，并引用相关图片资源文件。目前本站还没有进行这样的设置，以后会加上。</p>
<figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">favicon:</span></span><br><span class="line">  <span class="attr">small:</span> <span class="string">/images/favicon-16x16-next.png</span></span><br><span class="line">  <span class="attr">medium:</span> <span class="string">/images/favicon-32x32-next.png</span></span><br><span class="line">  <span class="attr">apple_touch_icon:</span> <span class="string">/images/apple-touch-icon-next.png</span></span><br><span class="line">  <span class="attr">safari_pinned_tab:</span> <span class="string">/images/logo.svg</span></span><br></pre></td></tr></tbody></table></figure>
<p>有关博客文章的版权声明，鉴于本博客大多以分享为主，我沿用了主题提供的 CC4.0 配置，意味着放开了共享和演绎（虽然我的文章一般没啥人看就是了 qwq）。这个选项的配置效果决定了文章底部的版权声明显示。</p>
<figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">creative_commons:</span></span><br><span class="line">  <span class="attr">license:</span> <span class="string">by-nc-sa</span></span><br><span class="line">  <span class="attr">sidebar:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">post:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">language:</span></span><br></pre></td></tr></tbody></table></figure>
<p>为了优化 SEO，OpenGraph 当然是必须配置的。这里参考 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io/docs/helpers#open-graph">hexo 的配置文档</a>配置了一些项目。</p>
<figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">open_graph:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">options:</span></span><br><span class="line">  <span class="comment"># 配置twitter_id、twitter_profile等</span></span><br></pre></td></tr></tbody></table></figure>
<p>目录设置需要在 <code>menu</code> 选项下进行配置，其配置分为 <code>Key</code>、<code>link</code> 和 <code>icon</code> 三部分。其中：</p>
<ul>
<li><code>Key</code> 是目录项的名称，大小写敏感。除了 <code>home</code> 和 <code>archive</code> 以外，其他类型都需要在 <code>source</code> 文件夹下手动创建文件夹和对应的 <code>index.md</code> 文件</li>
<li><code>link</code> 是目录项的链接，是链接到本站的相对路径，在实际测试时发现也可以写站外的绝对路径</li>
<li><code>icon</code> 是目录项的 Font Awesome 图标名，可以在<a target="_blank" rel="noopener external nofollow noreferrer" href="https://fontawesome.com/">这里</a>找到
<ul>
<li><code>link</code> 和 <code>icon</code> 之间用 <code>||</code> 分隔 </li>
</ul>
</li>
</ul>
<figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="attr">home:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-home</span></span><br><span class="line">  <span class="attr">about:</span> <span class="string">https://www.jason0743.space/#/about</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-user</span></span><br><span class="line">  <span class="attr">tags:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-tags</span></span><br><span class="line">  <span class="attr">categories:</span> <span class="string">/categories/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-th</span></span><br><span class="line">  <span class="attr">archives:</span> <span class="string">/archives/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-archive</span></span><br><span class="line">  <span class="attr">sitemap:</span> <span class="string">/sitemap.xml</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-sitemap</span></span><br></pre></td></tr></tbody></table></figure>
<img data-src="/2023/04/03/works/how-i-built-the-blog/menu.png" class="" title="显示效果">
<p><code>menu</code> 下还可以配置 <code>sub-menu</code>，其配置和 <code>menu</code> 类似，但是本站没必要配置这个，就不写了。</p>
<p>另外，在 <code>menu_settings</code> 还可以配置使用 <code>badges</code> 或者 <code>icons</code>。<code>badges: true</code> 会显示文章、类别和标签的数量。默认的 <code>icons: true</code> 会在 <code>menu</code> 项前显示图标。</p>
<h4 id="侧边栏">侧边栏</h4>
<p>博客中难免需要显示一些个人相关的社交平台联系链接。这些链接可以通过 <code>social</code> 配置项进行配置。它的格式与上述 menu 类似，但是指定的链接必须是绝对链接。</p>
<figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">social:</span></span><br><span class="line">  <span class="attr">GitHub:</span> <span class="string">https://github.com/jasonren0403</span> <span class="string">||</span> <span class="string">fab</span> <span class="string">fa-github</span></span><br><span class="line">  <span class="attr">Twitter:</span> <span class="string">https://twitter.com/theRealRev270</span> <span class="string">||</span> <span class="string">fab</span> <span class="string">fa-twitter</span></span><br><span class="line">  <span class="attr">Facebook:</span> <span class="string">https://www.facebook.com/renjason1999/</span> <span class="string">||</span> <span class="string">fab</span> <span class="string">fa-facebook</span></span><br><span class="line">  <span class="attr">Instagram:</span> <span class="string">https://www.instagram.com/jasonren0403/</span> <span class="string">||</span> <span class="string">fab</span> <span class="string">fa-instagram</span></span><br></pre></td></tr></tbody></table></figure>
<p>通过 <code>social_icons</code> 配置项可以进行进一步配置，如是否启用（<code>enabled</code>）、是否只显示图标不显示描述（<code>icons_only</code>）、是否显示过渡动画（<code>transition</code>）等。</p>
<p>中国常见的社交平台对应的 Fontawesome 图标名称总结如下：</p>
<table>
<thead>
<tr>
<th style="text-align:center">社交平台名称</th>
<th style="text-align:center"> Fontawesome 图标名称</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">知乎</td>
<td style="text-align:center"> fab fa-zhihu</td>
</tr>
<tr>
<td style="text-align:center"> 微博</td>
<td style="text-align:center"> fab fa-weibo</td>
</tr>
<tr>
<td style="text-align:center"> 微信</td>
<td style="text-align:center"> fab fa-weixin</td>
</tr>
<tr>
<td style="text-align:center">QQ</td>
<td style="text-align:center">fab fa-qq</td>
</tr>
<tr>
<td style="text-align:center"> 抖音</td>
<td style="text-align:center"> fab fa-douyin</td>
</tr>
<tr>
<td style="text-align:center"> 人人</td>
<td style="text-align:center"> fab fa-renren</td>
</tr>
<tr>
<td style="text-align:center">B 站</td>
<td style="text-align:center"> fab fa-bilibili</td>
</tr>
</tbody>
</table>
<p>对于单个博客文章，<code>Table of Contents(TOC)</code> 是非常必要的，它可以显示你的文章的大致结构。可以通过 <code>toc</code> 配置项进行启用和禁用。我的配置如下：</p>
<figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">toc:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">number:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">wrap:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">expand_all:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">max_depth:</span> <span class="number">6</span></span><br></pre></td></tr></tbody></table></figure>
<p>侧边栏所展现的个人头像可以通过 <code>avatar</code> 来进行配置，NexT 主题还支持使用 <code>rounded</code> 属性设置圆形头像，<code>rotated</code> 属性支持鼠标悬停时旋转头像。</p>
<img data-src="/2023/04/03/works/how-i-built-the-blog/sidemenu.png" class="" title="侧边栏头像效果">
<h4 id="页脚">页脚</h4>
<p>以下配置需要在 <code>footer</code> 选项下进行配置。</p>
<h5 id="备案信息">备案信息</h5>
<p>众所周知，开在中国大陆的站点都需要备案，而备案信息是需要在页脚显示的。这里可以通过 <code>beian</code> 配置项进行配置，如下：</p>
<figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">beian:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">icp:</span> <span class="string">京ICP备xxxxxxxx</span></span><br><span class="line">  <span class="attr">gongan_id:</span></span><br><span class="line">  <span class="attr">gongan_num:</span></span><br><span class="line">  <span class="attr">gongan_icon_url:</span></span><br></pre></td></tr></tbody></table></figure>
<h5 id="建站时间">建站时间</h5>
<p>一般建站的时候，总会往页脚加入开站时间，类似于 <code>2020-2023</code> 这样的。默认情况下，NexT 主题会显示当前年份，可以通过 <code>since</code> 配置项手动显示建站起始时间。</p>
<figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">footer:</span></span><br><span class="line">  <span class="attr">since:</span> <span class="number">2020</span>  <span class="comment"># 年份，一般表示建站时间</span></span><br></pre></td></tr></tbody></table></figure>
<h5 id="页脚图标">页脚图标</h5>
<p>页脚图标会显示在年份和版权信息之间，往往是一个红心图标。可以通过 <code>icon</code> 选项做更多自定义配置，如修改图标名称、修改图标颜色、使图标动起来等。</p>
<h5 id="版权信息">版权信息</h5>
<p>版权信息显示在页脚图标右侧，由 <code>copyright</code> 配置中的内容指定，如果未指定，则使用 Hexo 配置文件中的 <code>author</code> 配置项。</p>
<h5 id="生成平台信息">生成平台信息</h5>
<p>在默认情况下，NexT 主题会在页脚显示 <code>Powered by Hexo &amp; Next.xxx</code>，表示生成器和主题，可以通过 <code>powered</code> 配置项进行更改。我觉得留着也没什么问题，就没改。</p>
<h3 id="域名配置">域名配置</h3>
<p>根据 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/about-custom-domains-and-github-pages">GitHub 相关配置文档</a>和 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io/zh-cn/docs/github-pages.html">Hexo 文档</a>，需要在项目根目录下创建一个 <code>CNAME</code> 文件，里面写入你的域名，如 <code>example.com</code>。由于 hexo 部署时相当于把整个 source 文件夹复制到一个新的分支，故这个 <code>CNAME</code> 文件需要创建在 <code>source/</code> 文件夹下 <sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>。</p>
<img data-src="/2023/04/03/works/how-i-built-the-blog/cname.png" class="" title="项目结构及CNAME文件">
<p>在 Hexo 侧，需要在主配置文件<code>_config.yml</code> 中配合作这样的设置，以正确加载脚本及相关资源文件：</p>
<figure class="highlight yml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">url:</span> <span class="string">https://blog.jason0743.space/</span></span><br><span class="line"><span class="attr">root:</span> <span class="string">/</span></span><br></pre></td></tr></tbody></table></figure>
<p>其中 URL 项需要填写自己的自定义网址。我是使用了 blog 作为三级域名，所以在 URL 处填写的是整个网址，后面以斜杠 <code>/</code> 为结尾，而 root 就是网页的根目录。</p>
<p>如果今后需要将博客部署在子目录中（像 <code>https://example.com/child/</code> 这样），就需要在 url 中带上子目录，在 root 项填写带有两边斜杠的子目录名（对于 <code>https://example.com/child/</code> 这里就需要设置为 <code>/child/</code>）。</p>
<p>现代网页的地址末尾已经不一定需要 html 后缀了，甚至，主页的 <code>index</code> 字样我们也可以不需要（虽然实际上 Hexo 还是生成了它）。把这两个配置为 <code>false</code> 即可做到这一点。</p>
<figure class="highlight yml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">pretty_urls:</span></span><br><span class="line">  <span class="attr">trailing_index:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">trailing_html:</span> <span class="literal">false</span></span><br></pre></td></tr></tbody></table></figure>
<h3 id="启用资源文件夹">启用资源文件夹</h3>
<p>我的博客项目中会有很多图片，把它们都放在 <code>source/images</code> 文件夹中则会显得非常拥挤且不好管理。Hexo 提供了一种资源文件夹的概念，它可以在创建的新文章同级目录自动创建一个同名文件夹，然后使用相对路径插件来引入这些资源。</p>
<p>在主配置文件 <code>_config.yml</code> 中，将这个选项设为 <code>true</code> 即可启用该功能。</p>
<figure class="highlight yml"><figcaption><span>_config.yml</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">post_asset_folder:</span> <span class="literal">true</span></span><br></pre></td></tr></tbody></table></figure>
<p>撰写文章时，使用这个语法插入即可，其中 slug 处要填写文件名：</p>
<figure class="highlight markdown"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">{% asset<span class="emphasis">_path slug %}</span></span><br><span class="line"><span class="emphasis">{% asset_</span>img slug [title] %}</span><br><span class="line">{% asset<span class="emphasis">_link slug [title] %}</span></span><br></pre></td></tr></tbody></table></figure>
<h2 id="安装插件">安装插件</h2>
<h3 id="评论显示">评论显示</h3>
<p>静态站并没有 “后端” 这个概念，传统的评论系统该怎么实现呢？我们可以借助一些插件来实现。</p>
<p>我在这里的选择是 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://waline.js.org/">Waline</a>，比起之前的 Valine 来说，更加安全 <sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>，但配置起来需要一定时间。它需要同时考虑到 server 和 client 的部署问题。</p>
<div class="note info"><p>Waline 官方提供了<a target="_blank" rel="noopener external nofollow noreferrer" href="https://waline.js.org/guide/get-started/">部署文档</a>，所有步骤跟随这个走就行。</p>
</div>
<h4 id="服务端配置">服务端配置</h4>
<div class="note info"><p>LeanCloud 注册当然要选<a target="_blank" rel="noopener external nofollow noreferrer" href="https://leancloud.app/">国际版</a>，懂得都懂～</p>
</div>
<p>首先是 LeanCloud 端数据库的配置，注册账号和创建应用的过程就不赘述了（作为普通白嫖用户当然要选择开发版），然后到左侧的设置→应用凭证中，记下 AppID、AppKey 和 MasterKey，以后要用到。</p>
<img data-src="/2023/04/03/works/how-i-built-the-blog/leancloud-1.png" class="">
<p>接下来使用 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://vercel.com/">Vercel</a> 进行服务端部署，如果没有账户的话，可以直接使用 GitHub 账号登录。然后点击 Waline 文档中的 Vercel 部署按钮或<a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/walinejs/waline/tree/main/example">直接访问这个仓库</a>的 README.md 文件。</p>
<p>接下来会基于一个简单的模板创建 Git 仓库，作为 GitHub 常驻用户肯定时要选择 GitHub 的，如果有别的平台也可以点击别的平台按钮创建。</p>
<img data-src="/2023/04/03/works/how-i-built-the-blog/vercel-1.png" class="" title="选择仓库">
<p>项目创建成功后，进入到控制台中，从上方的 “Settings” 中进入项目设置，然后点击左侧的 “Environment Variables”，进入环境变量配置，建立三个环境变量 <code>LEAN_ID</code>、<code>LEAN_KEY</code>、<code>LEAN_MASTER_KEY</code>，分别对应上一步在 LeanCloud 获得的 AppID、AppKey 和 MasterKey。</p>
<div class="group-picture"><div class="group-picture-row"><div class="group-picture-column"><img data-src="/2023/04/03/works/how-i-built-the-blog/vercel-2.png" class="" title="环境变量配置1"></div><div class="group-picture-column"><img data-src="/2023/04/03/works/how-i-built-the-blog/vercel-3.png" class="" title="环境变量配置2"></div></div></div>
<p>然后点击顶部的 “Deployments” 进入部署页面，选择最近一次部署，点击 “Redeploy“使得刚才的环境变量生效。部署好后就可以回到主页点击”Visit“访问服务端了。</p>
<img data-src="/2023/04/03/works/how-i-built-the-blog/vercel-4.png" class="" title="回到主页">
<p>其界面大致是这样的</p>
<img data-src="/2023/04/03/works/how-i-built-the-blog/vercel-5.png" class="" title="部署完毕">
<p>如果需要加入域名（vercel 默认域名实在有些丑），则依然需要进入设置页中，这次需要进入”Domains” 中，输入需要绑定的域名并点击 “Add” 添加域名，然后在服务商处加入 CNAME 解析记录，其值为 <code>cname.vercel-dns.com</code>，之后就可以用自己的域名来访问评论系统和管理端了。</p>
<img data-src="/2023/04/03/works/how-i-built-the-blog/vercel-6.png" class="">
<p>立即访问管理端（<code>&lt;url&gt;/ui/register</code>）进行注册，注册成功后，以后就可以通过 <code>&lt;url&gt;/ui</code> 管理评论了。</p>
<div class="note info"><p>这里最好通过账号绑定设置（<code>&lt;url&gt;/ui/profile</code>）到自己常用账户上，防止忘记登录凭证。</p>
</div>
<div class="note info"><p><code>&lt;url&gt;</code> 为 vercel 域名设置中所列出的域名，项目新建的默认值一般为 <code>&lt;project-name&gt;.vercel.app</code></p>
</div>
<img data-src="/2023/04/03/works/how-i-built-the-blog/management.png" class="" title="管理界面">
<h4 id="客户端配置">客户端配置</h4>
<p>客户端需要进行样式导入和代码注入，对于 hexo-next 来说，像下面这样安装<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.npmjs.com/package/@waline/hexo-next">插件</a>并加以配置即可。</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @waline/hexo-next</span><br></pre></td></tr></tbody></table></figure>
<p>然后在主题配置文件 <code>_config.next.yml</code> 中加入以下内容：</p>
<figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">waline:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">serverURL:</span> </span><br><span class="line">  <span class="attr">libUrl:</span></span><br><span class="line">  <span class="attr">cssUrl:</span></span><br><span class="line">  <span class="attr">locale:</span></span><br><span class="line">    <span class="attr">placeholder:</span> </span><br><span class="line">  <span class="attr">commentCount:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">pageview:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">emoji:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">https://unpkg.com/@waline/emojis@1.0.1/weibo</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">https://unpkg.com/@waline/emojis@1.0.1/alus</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">https://unpkg.com/@waline/emojis@1.0.1/bilibili</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">https://unpkg.com/@waline/emojis@1.0.1/qq</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">https://unpkg.com/@waline/emojis@1.0.1/tieba</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">https://unpkg.com/@waline/emojis@1.0.1/tw-emoji</span></span><br><span class="line">  <span class="attr">meta:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">nick</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">mail</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">link</span></span><br><span class="line">  <span class="attr">requiredMeta:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">nick</span></span><br><span class="line">  <span class="attr">lang:</span> <span class="string">zh-CN</span>	</span><br><span class="line">  <span class="attr">wordLimit:</span> <span class="number">0</span></span><br><span class="line">  <span class="attr">login:</span> <span class="string">enable</span></span><br><span class="line">  <span class="attr">pageSize:</span> <span class="number">10</span></span><br></pre></td></tr></tbody></table></figure>
<p>首先当然要启用该插件（<code>enable:true</code>）。然后需要设置 <code>serverURL</code> 为刚才部署的服务端地址，如果使用了自定义域名的话，这里就需要填写自定义域名。语言当然设置为 <code>zh-CN</code>，我也启用了 <code>pageview</code> 和 <code>commentCount</code> 两个功能，显示文章的阅读统计和评论数量，配置效果如下：</p>
<img data-src="/2023/04/03/works/how-i-built-the-blog/comment.png" class="" title="评论区效果">
<h3 id="视频-音乐嵌入">视频 / 音乐嵌入</h3>
<p>博客如果只有静态的文字和图片的话，也未免太单调了吧！如果能适时地嵌入一些其他网站或自己上传的资源，就更好了。我选择的是 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.u2sb.com/OpenSw/hexo-tag-mmedia/install.html">mmedia</a> 插件，因为它目前支持较广，而且使用也比较方便。</p>
<p>针对 hexo，只需要安装 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.npmjs.com/package/hexo-tag-mmedia">hexo-tag-mmedia</a> 插件即可，安装方法如下：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-tag-mmedia --save</span><br></pre></td></tr></tbody></table></figure>
<p>然后在 <code>_config.yml</code> 下采用作者推荐的默认设置即可：</p>
<figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mmedia:</span></span><br><span class="line">  <span class="attr">audio:</span></span><br><span class="line">    <span class="attr">default:</span></span><br><span class="line">  <span class="attr">video:</span></span><br><span class="line">    <span class="attr">default:</span></span><br><span class="line">  <span class="attr">aplayer:</span></span><br><span class="line">    <span class="attr">js:</span> <span class="string">https://cdn.jsdelivr.net/npm/aplayer@1/dist/APlayer.min.js</span></span><br><span class="line">    <span class="attr">css:</span> <span class="string">https://cdn.jsdelivr.net/npm/aplayer@1/dist/APlayer.min.css</span></span><br><span class="line">    <span class="attr">default:</span></span><br><span class="line">      <span class="attr">contents:</span></span><br><span class="line">  <span class="attr">meting:</span></span><br><span class="line">    <span class="attr">js:</span> <span class="string">https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js</span></span><br><span class="line">    <span class="attr">api:</span></span><br><span class="line">    <span class="attr">default:</span></span><br><span class="line">  <span class="attr">dplayer:</span></span><br><span class="line">    <span class="attr">js:</span> <span class="string">https://cdn.jsdelivr.net/npm/dplayer@1/dist/DPlayer.min.js</span></span><br><span class="line">    <span class="attr">hls_js:</span> <span class="string">https://cdn.jsdelivr.net/npm/hls.js/dist/hls.min.js</span></span><br><span class="line">    <span class="attr">dash_js:</span> <span class="string">https://cdn.jsdelivr.net/npm/dashjs/dist/dash.all.min.js</span></span><br><span class="line">    <span class="attr">shaka_dash_js:</span> <span class="string">https://cdn.jsdelivr.net/npm/shaka-player/dist/shaka-player.compiled.js</span></span><br><span class="line">    <span class="attr">flv_js:</span> <span class="string">https://cdn.jsdelivr.net/npm/flv.js/dist/flv.min.js</span></span><br><span class="line">    <span class="attr">webtorrent_js:</span> <span class="string">https://cdn.jsdelivr.net/npm/webtorrent/webtorrent.min.js</span></span><br><span class="line">    <span class="attr">default:</span></span><br><span class="line">      <span class="attr">contents:</span></span><br><span class="line">  <span class="attr">bilibili:</span></span><br><span class="line">    <span class="attr">default:</span></span><br><span class="line">      <span class="attr">page:</span> <span class="number">1</span></span><br><span class="line">      <span class="attr">danmaku:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">allowfullscreen:</span> <span class="string">allowfullscreen</span></span><br><span class="line">      <span class="attr">sandbox:</span> <span class="string">allow-top-navigation</span> <span class="string">allow-same-origin</span> <span class="string">allow-forms</span> <span class="string">allow-scripts</span> <span class="string">allow-popups</span></span><br><span class="line">      <span class="attr">width:</span> <span class="number">100</span><span class="string">%</span></span><br><span class="line">      <span class="attr">max_width:</span> <span class="string">850px</span></span><br><span class="line">      <span class="attr">margin:</span> <span class="string">auto</span></span><br><span class="line">  <span class="attr">xigua:</span></span><br><span class="line">    <span class="attr">default:</span></span><br><span class="line">      <span class="attr">autoplay:</span> <span class="literal">false</span></span><br><span class="line">      <span class="attr">startTime:</span> <span class="number">0</span></span><br><span class="line">      <span class="attr">allowfullscreen:</span> <span class="string">allowfullscreen</span></span><br><span class="line">      <span class="attr">sandbox:</span> <span class="string">allow-top-navigation</span> <span class="string">allow-same-origin</span> <span class="string">allow-forms</span> <span class="string">allow-scripts</span> <span class="string">allow-popups</span></span><br><span class="line">      <span class="attr">width:</span> <span class="number">100</span><span class="string">%</span></span><br><span class="line">      <span class="attr">max_width:</span> <span class="string">850px</span></span><br><span class="line">      <span class="attr">margin:</span> <span class="string">auto</span></span><br></pre></td></tr></tbody></table></figure>
<p>在使用上，假如要嵌入一个 B 站的视频，只需要使用这个简单语法：</p>
<figure class="highlight markdown"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">{% mmedia "bilibili" "bvid:BV<span class="language-xml"><span class="tag">&lt;<span class="name">xxxxx</span>&gt;</span></span>" %}</span><br></pre></td></tr></tbody></table></figure>
<p>即可，其中第一个参数是要引用的视频网站名称，第二个参数是要引用的视频 id，以冒号或者等号分隔都可以。</p>
<p>如果要嵌入音乐播放列表，则需要采用其中的 MetingJS 标签形式，采用的参数可以在<a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/metowolf/MetingJS">这里</a>了解。</p>
<figure class="highlight markdown"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">{% mmedia "meting" "server=<span class="language-xml">&lt;netease|tencent|kugou|xiami|baidu&gt;</span>" "type=<span class="language-xml">&lt;song|playlist|album|search|artist&gt;</span>" %}</span><br></pre></td></tr></tbody></table></figure>
<p>其支持的平台其实已经能够涵盖常见的用途了。如果以上几种不够用，还有最后的 Audio 和 Video 参数打底，它可以支持上传自有资源，插入原生的标签。</p>
<div class="note warning"><p>不过<a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/u2sb/hexo-tag-mmedia/issues/23">这个插件的原作者说他要弃坑了</a>，保证稳定性的话，还是最好找个替代品，或者自己二次封装一下比较合适。</p>
</div>
<h3 id="Markdown渲染器配置">Markdown 渲染器配置</h3>
<p>Hexo 默认搭配的渲染器是 <code>hexo-renderer-marked</code>，其支持的渲染格式有限，所以我重新使用了 <code>hexo-renderer-markdown-it</code>，它支持更多的解析和渲染格式，如 GFM 和 Commonmark 等，还支持插件。</p>
<p>在安装它之前，需要卸载 Hexo 默认自带的渲染器。</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall hexo-renderer-marked --save</span><br></pre></td></tr></tbody></table></figure>
<p>然后再安装 <code>hexo-renderer-markdown-it</code>。</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-renderer-markdown-it --save</span><br></pre></td></tr></tbody></table></figure>
<p>它的配置在 <code>_config.yml</code> 中，直接使用默认的简单配置即可。</p>
<figure class="highlight yml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">markdown:</span></span><br><span class="line">  <span class="attr">preset:</span> <span class="string">'default'</span></span><br><span class="line">  <span class="attr">render:</span></span><br><span class="line">    <span class="attr">html:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">xhtmlOut:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">langPrefix:</span> <span class="string">'language-'</span></span><br><span class="line">    <span class="attr">breaks:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">linkify:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">typographer:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">quotes:</span> <span class="string">'“”‘’'</span></span><br><span class="line">  <span class="attr">enable_rules:</span></span><br><span class="line">  <span class="attr">disable_rules:</span></span><br><span class="line">  <span class="attr">plugins:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">markdown-it-abbr</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">markdown-it-footnote</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">markdown-it-ins</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">markdown-it-sub</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">markdown-it-sup</span></span><br><span class="line">  <span class="attr">anchors:</span></span><br><span class="line">    <span class="attr">level:</span> <span class="number">2</span></span><br><span class="line">    <span class="attr">collisionSuffix:</span> <span class="string">''</span></span><br><span class="line">    <span class="attr">permalink:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">permalinkClass:</span> <span class="string">'header-anchor'</span></span><br><span class="line">    <span class="attr">permalinkSide:</span> <span class="string">'left'</span></span><br><span class="line">    <span class="attr">permalinkSymbol:</span> <span class="string">'¶'</span></span><br><span class="line">    <span class="attr">case:</span> <span class="number">0</span></span><br><span class="line">    <span class="attr">separator:</span> <span class="string">'-'</span></span><br></pre></td></tr></tbody></table></figure>
<p>其实我最需要的是脚注（<code>markdown-it-footnote</code>）功能，这个语法可以用来写一些参考文献，或者是一些引用的资料。</p>
<h2 id="部署到GitHub">部署到 GitHub</h2>
<p>由于将博客放到云服务器上操作过程过于繁琐（万一域名失效了还得四处拷贝搬运，并且配置域名 HTTPS 啥的也是不少麻烦），我选择使用 GitHub Pages 功能来托管我的内容。GitHub Pages 是 GitHub 提供的一个静态网页托管服务，可以将静态网页托管到 GitHub 上，然后通过 <code>username.github.io</code> 的形式来访问。这样做的好处是，我可以将博客的源码和静态网页内容分开，而且可以通过 GitHub Actions 来实现自动化部署。</p>
<h3 id="建立仓库">建立仓库</h3>
<p>在 GitHub 上建立一个新的仓库，并做好初始化，稍后我们会将博客的源码推送到这个仓库上。</p>
<p>本地的博客文件夹中，现在应该已经是这样的结构：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">+--+</span><br><span class="line">   |---scaffolds</span><br><span class="line">      |---draft.md</span><br><span class="line">      |---page.md</span><br><span class="line">      |---post.md</span><br><span class="line">   |---source</span><br><span class="line">      |---_drafts</span><br><span class="line">      |</span><br><span class="line">      |---_posts</span><br><span class="line">      |</span><br><span class="line">      |---categories</span><br><span class="line">           |---index.md</span><br><span class="line">      |---tags</span><br><span class="line">           |---index.md</span><br><span class="line">      |---CNAME</span><br><span class="line">   |---_config.next.yml</span><br><span class="line">   |---_config.yml</span><br><span class="line">   |---package.json</span><br><span class="line">   |---package-lock.json</span><br><span class="line">   |....</span><br></pre></td></tr></tbody></table></figure>
<p>在这个文件夹下运行 <code>git init</code>，之后再把这个分支推送到仓库中。</p>
<p>目前，我的博客全部源码内容都在 <code>main</code> 分支上，而博客的静态网页内容则在 <code>gh-pages</code> 分支上。这样做的好处是，我可以在 <code>main</code> 分支上进行博客的编辑和维护，而 <code>gh-pages</code> 分支则可以作为一个单独的静态网页仓库，用于部署到 GitHub Pages 上。</p>
<h3 id="使用GitHub-Actions全自动化部署过程">使用 GitHub Actions 全自动化部署过程</h3>
<p>Hexo 本身其实也有提供 deploy 命令用于部署仓库，但是这个命令每次都要手动执行，稍微有点不太方便。故我选择了尝试使用 GitHub Actions 来实现自动化部署。</p>
<p>GitHub Actions 是处于 git 仓库中 <code>.github/workflows</code> 文件夹下的一个 yml 配置文件。其记载了在什么样的条件下，自动执行什么样的操作。</p>
<p>我们的文件是这样的：</p>
<figure class="highlight yml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">publish-webpage</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">publish-webpage:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">if:</span> <span class="string">github.event.repository.owner.id</span> <span class="string">==</span> <span class="string">github.event.sender.id</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span> <span class="string">source</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/checkout@v3</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">ref:</span> <span class="string">main</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Setup</span> <span class="string">Node.js</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/setup-node@v3</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="number">16</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Setup</span> <span class="string">Hexo</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">          <span class="attr">ACTION_DEPLOY_KEY:</span> <span class="string">${{</span> <span class="string">secrets.HEXO_DEPLOY_KEY</span> <span class="string">}}</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          mkdir -p ~/.ssh/</span></span><br><span class="line"><span class="string">          echo "$ACTION_DEPLOY_KEY" &gt; ~/.ssh/id_rsa</span></span><br><span class="line"><span class="string">          chmod 700 ~/.ssh</span></span><br><span class="line"><span class="string">          chmod 600 ~/.ssh/id_rsa</span></span><br><span class="line"><span class="string">          ssh-keyscan github.com &gt;&gt; ~/.ssh/known_hosts</span></span><br><span class="line"><span class="string">          git config --global user.email "40999116+jasonren0403@users.noreply.github.com"</span></span><br><span class="line"><span class="string">          git config --global user.name "Jason Ren"</span></span><br><span class="line"><span class="string">          npm install hexo-cli -g</span></span><br><span class="line"><span class="string">          npm install</span></span><br><span class="line"><span class="string"></span>      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Build</span> <span class="string">and</span> <span class="string">Deploy</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          hexo clean</span></span><br><span class="line"><span class="string">          hexo generate</span></span><br><span class="line"><span class="string">          hexo deploy</span></span><br></pre></td></tr></tbody></table></figure>
<p>注意，这些代码与 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io/zh-cn/docs/github-pages">hexo 文档</a>上的部署代码并不一样，主要的不同点在于官方教程使用了 <code>actions-gh-pages</code>，而自己这边使用的是 git 原生命令来自己建一个部署密钥。</p>
<div class="note "><p>其实个人认为官方这个代码是比较好的，因为其所使用的 <code>actions-gh-pages</code> 无需担心部署密钥，<code>github_token</code> 是可以自动在工作流中认证的，不是个人访问令牌，除了首次部署外，无需特别配置。</p>
<p>而且，它还注意了 npm 依赖的缓存，以后要是再次部署的话，无需再费很长时间安装依赖，博客上线速度可以大大加快。</p>
</div>
<p>生成 deploy key 的过程如下：</p>
<h4 id="生成Deploy-key">生成 Deploy key</h4>
<ol>
<li>
<p>在本地运行 <code>ssh-keygen -t rsa -b 4096 -C "Hexo Deploy Key" -f github-deploy-key -N ""</code> 生成一个新的密钥对。</p>
 <img data-src="/2023/04/03/works/how-i-built-the-blog/gen-key-1.png" class="">
</li>
<li>
<p>在仓库的设置选项卡中，选择 “Secrets”（现为 “Secrets and variables”），新建名称为 “HEXO_DEPLOY_KEY”（这个名称是与刚才工作流配置文件中的 <code>secrets.*</code> 后面的内容是对应的）的密钥，将刚刚生成的公钥对应的私钥的内容复制进去。</p>
 <img data-src="/2023/04/03/works/how-i-built-the-blog/gen-key-0.png" class="">
<p>配置完成后，Action Secrets 列表（现 Actions Secrets and variables 中的 Repository secrets）中应该会出现一个新的密钥。</p>
 <img data-src="/2023/04/03/works/how-i-built-the-blog/gen-key-2.png" class="">
</li>
<li>
<p>转到 “Deploy Keys” 中，右上角新添加一个部署密钥。</p>
 <img data-src="/2023/04/03/works/how-i-built-the-blog/gen-key-3.png" class="">
</li>
<li>
<p>将刚才生成公钥的内容复制进去（以 ssh-rsa 开头），并勾选 “Allow write access”。</p>
 <img data-src="/2023/04/03/works/how-i-built-the-blog/gen-key-4.png" class="">
</li>
</ol>
<p>配置完成后，每次将博客源码推送到 <code>main</code> 分支时，GitHub Actions 就会自动执行部署操作。</p>
<h4 id="保留-gh-pages-提交历史">保留 gh-pages 提交历史</h4>
<p>上面的 Actions 是很容易想的，但每次提交仓库后，会发现 gh-pages 分支的提交历史都是一条直线，没有任何记录。这是因为 <code>hexo-deployer-git</code> 每次部署时，都会先清空 gh-pages 分支，再重新生成静态网页，再提交到 gh-pages 分支上。</p>
<p>干净提交也并不是不可以，但每次提交后，都会导致 gh-pages 分支的提交历史被重写，这样就无法通过提交历史来查看博客的更新记录了。</p>
<p>怎么办呢？这时需要去看看 <code>hexo-deployer-git</code> 的源码寻找答案。</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// setup()</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">setup</span>(<span class="params"></span>) {</span><br><span class="line">	<span class="keyword">const</span> userName = args.<span class="property">name</span> || args.<span class="property">user</span> || args.<span class="property">userName</span> || <span class="string">''</span>;</span><br><span class="line">	<span class="keyword">const</span> userEmail = args.<span class="property">email</span> || args.<span class="property">userEmail</span> || <span class="string">''</span>;</span><br><span class="line">	<span class="comment">// Create a placeholder for the first commit</span></span><br><span class="line">	<span class="keyword">return</span> fs.<span class="title function_">writeFile</span>(pathFn.<span class="title function_">join</span>(deployDir, <span class="string">'placeholder'</span>), <span class="string">''</span>).<span class="title function_">then</span>(<span class="function">() =&gt;</span> {</span><br><span class="line">		<span class="keyword">return</span> <span class="title function_">git</span>(<span class="string">'init'</span>);</span><br><span class="line">	}).<span class="title function_">then</span>(<span class="function">() =&gt;</span> {</span><br><span class="line">		<span class="keyword">return</span> userName &amp;&amp; <span class="title function_">git</span>(<span class="string">'config'</span>, <span class="string">'user.name'</span>, userName);</span><br><span class="line">	}).<span class="title function_">then</span>(<span class="function">() =&gt;</span> {</span><br><span class="line">		<span class="keyword">return</span> userEmail &amp;&amp; <span class="title function_">git</span>(<span class="string">'config'</span>, <span class="string">'user.email'</span>, userEmail);</span><br><span class="line">	}).<span class="title function_">then</span>(<span class="function">() =&gt;</span> {</span><br><span class="line">		<span class="keyword">return</span> <span class="title function_">git</span>(<span class="string">'add'</span>, <span class="string">'-A'</span>);</span><br><span class="line">	}).<span class="title function_">then</span>(<span class="function">() =&gt;</span> {</span><br><span class="line">		<span class="keyword">return</span> <span class="title function_">git</span>(<span class="string">'commit'</span>, <span class="string">'-m'</span>, <span class="string">'First commit'</span>);</span><br><span class="line">	});</span><br><span class="line">}</span><br><span class="line"><span class="comment">// ... //</span></span><br><span class="line"><span class="keyword">return</span> fs.<span class="title function_">exists</span>(deployDir).<span class="title function_">then</span>(<span class="function"><span class="params">exist</span> =&gt;</span> {</span><br><span class="line">    <span class="keyword">if</span> (exist) <span class="keyword">return</span>;</span><br><span class="line">    log.<span class="title function_">info</span>(<span class="string">'Setting up Git deployment...'</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">setup</span>();</span><br><span class="line">  }).<span class="title function_">then</span>(<span class="function">() =&gt;</span> {</span><br><span class="line">    log.<span class="title function_">info</span>(<span class="string">'Clearing .deploy_git folder...'</span>);</span><br><span class="line">    <span class="keyword">return</span> fs.<span class="title function_">emptyDir</span>(deployDir);</span><br><span class="line">  })</span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></tbody></table></figure>
<p>也就是说，<code>hexo-deployer-git</code> 会先在 <code>.deploy_git</code> 中生成仓库，并将它强制推送到 <code>_config.yml</code> 配置中的仓库上，如果文件夹不存在，则会进入初始化流程。</p>
<p>因此，我们要在 <code>hexo deploy</code> 之前，先手创建一个 <code>.deploy_git</code> 文件夹，并将当前的 <code>gh-pages</code> 分支的内容复制进去，这样就可以保留提交历史了。</p>
<p>可以使用 git clone 命令，也可以使用 <code>actions/checkout</code> 来实现在工作流中克隆仓库内容。</p>
<figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">publish-webpage:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">    <span class="comment">#	... #	  </span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Fetch</span> <span class="string">current</span> <span class="string">htmls</span></span><br><span class="line">      <span class="attr">uses:</span> <span class="string">actions/checkout@v3</span></span><br><span class="line">      <span class="attr">with:</span></span><br><span class="line">        <span class="attr">ref:</span> <span class="string">gh-pages</span></span><br><span class="line">        <span class="attr">fetch-depth:</span> <span class="number">0</span></span><br><span class="line">        <span class="attr">path:</span> <span class="string">.deploy_git</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Build</span> <span class="string">Hexo</span> <span class="string">🔧</span></span><br><span class="line">      <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">        hexo clean</span></span><br><span class="line"><span class="string">        hexo generate</span></span><br><span class="line"><span class="string">        hexo deploy</span></span><br></pre></td></tr></tbody></table></figure>
<h4 id="使用正确的时区">使用正确的时区</h4>
<p>在使用 GitHub Actions 生成博客时，会发现生成的时间与实际不太一致，因为运行我们的 Actions 的机器跟我们并不在同一时区。这可以通过设置时区来解决。</p>
<figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">env:</span></span><br><span class="line">  <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br></pre></td></tr></tbody></table></figure>
<h2 id="访问优化">访问优化</h2>
<p>博客的内容会越来越多，大量的文章和图片难免会拖慢访问速度，hexo 及相关的插件也提供了一些优化的方法。</p>
<h3 id="hexo-all-minifier">hexo-all-minifier</h3>
<p>这个插件主要用于对博客中生成的 HTML、CSS、JS 和图片文件进行压缩，减少文件及仓库的体积，提高访问速度。</p>
<p>通过 npm 安装就可以使用：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-all-minifier --save</span><br></pre></td></tr></tbody></table></figure>
<p>然后在 <code>_config.yml</code> 中设置</p>
<figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">all_minifier:</span> <span class="literal">true</span></span><br></pre></td></tr></tbody></table></figure>
<p>就可以开启插件。从实际使用体验来看，它自带的 js_concator、js_minifier、html_minifier、css_minifier 都可以保持开启，而在开发（撰写文章）时需要暂时关掉 <code>image_minifier</code>，因为压缩图片比较费时。</p>
<h3 id="cache">cache</h3>
<p>NexT 从 6.0.0 版本开始引入了内容生成缓存，顾名思义，在重复生成大量内容时这个选项可以节省下大量的时间。在 <code>_config.next.yml</code> 中完成这个配置即可：</p>
<figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">cache:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></tbody></table></figure>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io/zh-cn/docs/github-pages#%E9%A1%B9%E7%9B%AE%E9%A1%B5%E9%9D%A2">https://hexo.io/zh-cn/docs/github-pages# 项目页面</a> <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn2" class="footnote-item"><p>查阅资料得知 waline 使用了 vercel 部署了一个 webapp，隔离了前端和存储，避免了安全问题 <a href="#fnref2" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>请我一杯咖啡吧！</div>
  <button>
    赞赏
  </button>
  <div class="post-reward">
      <div>
        <img src="/images/wechatpay.png" alt="Jason Ren 微信">
        <span>微信</span>
      </div>
      <div>
        <img src="/images/alipay.jpg" alt="Jason Ren 支付宝">
        <span>支付宝</span>
      </div>

  </div>
</div>

          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>本文作者： </strong>Jason Ren
  </li>
  <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="https://blog.jason0743.space/2023/04/03/works/how-i-built-the-blog/" title="我是如何一步步把这个博客搭建起来的">https://blog.jason0743.space/2023/04/03/works/how-i-built-the-blog/</a>
  </li>
  <li class="post-copyright-license">
      <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener external nofollow noreferrer" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

          <div class="followme">
  <span>欢迎关注我的其它发布渠道</span>

  <div class="social-list">

      <div class="social-item">
          <a target="_blank" class="social-link" href="https://twitter.com/theRealRev270" rel="external nofollow noreferrer">
            <span class="icon">
              <i class="fab fa-twitter"></i>
            </span>

            <span class="label">Twitter</span>
          </a>
      </div>

      <div class="social-item">
          <a target="_blank" class="social-link" href="https://t.me/jrchan_blog" rel="external nofollow noreferrer">
            <span class="icon">
              <i class="fab fa-telegram"></i>
            </span>

            <span class="label">Telegram</span>
          </a>
      </div>

      <div class="social-item">
          <span class="social-link">
            <span class="icon">
              <i class="fab fa-weixin"></i>
            </span>

            <span class="label">WeChat</span>
          </span>

          <img class="social-item-img" src="/images/gongzhonghao.jpg">
      </div>

      <div class="social-item">
          <a target="_blank" class="social-link" href="/atom.xml">
            <span class="icon">
              <i class="fa fa-rss"></i>
            </span>

            <span class="label">RSS</span>
          </a>
      </div>

      <div class="social-item">
          <a target="_blank" class="social-link" href="https://www.zhihu.com/people/bu-zhi-dao-gai-jiao-shi-yao-hao-51" rel="external nofollow noreferrer">
            <span class="icon">
              <i class="fab fa-zhihu"></i>
            </span>

            <span class="label">知乎</span>
          </a>
      </div>
  </div>
</div>

          <div class="post-tags">
              <a href="/tags/%E8%BF%90%E7%BB%B4/" rel="tag"><i class="fa fa-tag"></i> 运维</a>
              <a href="/tags/%E5%BB%BA%E7%AB%99/" rel="tag"><i class="fa fa-tag"></i> 建站</a>
          </div>

        
  <div class="social-like a2a_kit a2a_kit_size_32 a2a_default_style">
    <a class="a2a_dd" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.addtoany.com/share"></a>
      <a class="a2a_button_facebook"></a>
      <a class="a2a_button_twitter"></a>
      <a class="a2a_button_x"></a>
      <a class="a2a_button_telegram"></a>
      <a class="a2a_button_mastodon"></a>
      <a class="a2a_button_douban"></a>
      <a class="a2a_button_sina_weibo"></a>
      <a class="a2a_button_wechat"></a>
      <a class="a2a_button_outlook_com"></a>
      <a class="a2a_button_email"></a>
  </div>

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2023/02/17/works/frontend/what-is-behind-b23tv/" rel="prev" title="谈点 b23tv 短链接相关">
                  <i class="fa fa-angle-left"></i> 谈点 b23tv 短链接相关
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2023/04/21/works/working-with-https/" rel="next" title="给自己的小破站上个 HTTPS">
                  给自己的小破站上个 HTTPS <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments" id="waline"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener external nofollow noreferrer" target="_blank">京ICP备19044050-3 </a>
  </div>
  <div class="copyright">
    © 2020 – 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Jason Ren</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">102k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">6:11</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener external nofollow noreferrer" target="_blank">Hexo</a> &amp; <a href="https://theme-next.js.org/muse/" rel="noopener external nofollow noreferrer" target="_blank">NexT.Muse</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

  <a href="https://github.com/jasonren0403" class="github-corner" title="在 GitHub 上关注我" aria-label="在 GitHub 上关注我" rel="noopener external nofollow noreferrer" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.28/fancybox/fancybox.umd.js" integrity="sha256-ytMJGN3toR+a84u7g7NuHm91VIR06Q41kMWDr2pq7Zo=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>



  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.6.1/mermaid.min.js","integrity":"sha256-mm3Re3y7xlvh+yCD+l/Zs1d+PU0AEad93MkWvljfm/s="}}</script>
  


  

  

  

  
  <script async="" src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>



<script class="next-config" data-name="waline" type="application/json">{"lang":"zh-CN","enable":true,"serverURL":"https://blog-manage.jason0743.space/","cssUrl":"https://cdnjs.cloudflare.com/ajax/libs/waline/2.15.4/waline.css","commentCount":true,"pageview":false,"libUrl":"https://cdnjs.cloudflare.com/ajax/libs/waline/2.15.4/waline.js","locale":{"placeholder":"来发表一条友善的评论吧~"},"emoji":["https://unpkg.com/@waline/emojis@1.0.1/weibo","https://unpkg.com/@waline/emojis@1.0.1/alus","https://unpkg.com/@waline/emojis@1.0.1/bilibili","https://unpkg.com/@waline/emojis@1.0.1/qq","https://unpkg.com/@waline/emojis@1.0.1/tieba","https://unpkg.com/@waline/emojis@1.0.1/tw-emoji"],"meta":["nick","mail","link"],"requiredMeta":["nick","mail"],"wordLimit":0,"login":"enable","pageSize":10,"el":"#waline","comment":true,"path":"/2023/04/03/works/how-i-built-the-blog/"}</script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/waline/2.15.4/waline.css">
<script>
document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.waline.el).then(() =>
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => 
    Waline.init(Object.assign({}, CONFIG.waline,{ el: document.querySelector(CONFIG.waline.el) }))
  );
});
</script>



<script type="text/javascript" src="/js/bundle.js"></script></body></html>