firebase.initializeApp({apiKey:CONFIG.firestore.apiKey,projectId:CONFIG.firestore.projectId}),function(){const i=async(e,t)=>{const o=await e.get();let r=o.exists?o.data().count:0;return t&&(r++,e.set({count:r})),r},e=firebase.firestore(),n=e.collection(CONFIG.firestore.collection);document.addEventListener("page:loaded",async()=>{if(CONFIG.page.isPost){var t=document.querySelector(".post-title").textContent.trim(),o=n.doc(t);let e=CONFIG.hostname===location.hostname;localStorage.getItem(t)?e=!1:localStorage.setItem(t,!0);t=await i(o,e);document.querySelector(".firestore-visitors-count").innerText=t}else if(CONFIG.page.isHome){o=[...document.querySelectorAll(".post-title")].map(e=>{e=e.textContent.trim(),e=n.doc(e);return i(e)});const e=await Promise.all(o),r=document.querySelectorAll(".firestore-visitors-count");e.forEach((e,t)=>{r[t].innerText=e})}})}();